
面向切面编程(aop)

对oop的补充和完善

日志代码往往横向地散布在所有对象层次中，而与它对应的对象的核心功能毫无关系对于其他类型的代码，
如安全性、异常处理和透明的持续性也都是如此，这种散布在各处的无关的代码被称为**横切**（cross cutting）
，在OOP设计中，它导致了大量代码的重复，而不利于各个模块的重用。

AOP技术恰恰相反，它利用一种称为**"横切"** 的技术，剖解开封装的对象内部，并将那些影响了多个类的**公共行为**封装到一个可重用模块，并将其命名为"Aspect"，即切面。所谓"切面"，简单说就是那些与业务无关，却为业务模块所共同调用的逻辑或责任封装起来，便于减少系统的重复代码，降低模块之间的耦合度，并有利于未来的可操作性和可维护性。

使用"横切"技术，AOP把软件系统分为两个部分：**核心关注点和横切关注点。** 业务处理的主要流程是**核心关注点**，与之关系不大的部分是横切关注点。横切关注点的一个特点是，他们经常发生在核心关注点的多处，而各处基本相似，比如权限认证、日志、事物。AOP的作用在于分离系统中的各种关注点，将核心关注点和横切关注点分离开来。(重点理解)


核心概念：

横切关注点:对哪些方法进行拦截，拦截后怎么处理，这些关注点称之为横切关注点。切面就是对横切关注点的抽象。

连接点：被拦截到的点，因为Spring只支持方法类型的连接点。

切入点：对连接点进行拦截的定义

通知：指拦截到连接点之后要执行的代码，通知分为前置、后置、异常、最终、环绕通知五类

目标对象：代理的目标对象

织入：将切面应用到目标对象并导致代理对象创建的过程

引入：在不修改代码的前提下，引入可以在运行期为类动态地添加一些方法或字段

AOP代理由Spring的IOC容器负责生成、管理，其依赖关系也由IOC容器负责管理。因此，AOP代理可以直接使用容器中的其它bean实例作为目标

代理的规则：

1、默认使用Java动态代理来创建AOP代理，这样就可以为任何接口实例创建代理了

2、当需要代理的类不是代理接口的时候，Spring会切换为使用CGLIB代理，也可强制使用CGLIB

一个切入点可能横切多个业务组件

AOP编程的关键就是定义切入点和定义增强处理，一旦定义了合适的切入点和增强处理，AOP框架将自动生成AOP代理，即：代理对象的方法=增强处理+被代理对象的方法。

增强处理就是在AOP框架为普通业务组件织入的处理动作


实现AOP的技术，主要分为两大类：

一是采用动态代理技术，利用截取消息的方式，对该消息进行装饰，以取代原有对象行为的执行；

二是采用静态织入的方式，引 入特定的语法创建“方面”，从而使得编译器可以在编译期间织入有关“方面”的代码。

使用场景：　Authentication 权限　　　Caching 缓存　　Context passing 内容传递
Error handling 错误处理　Lazy loading　懒加载　Debugging　调试　　logging, tracing, profiling and monitoring　记录跟踪　优化　校准　Performance optimization　性能优化　　Persistence　　持久化
Resource pooling　资源池　　Synchronization　同步　Transactions 事务
